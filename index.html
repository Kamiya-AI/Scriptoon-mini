<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- Primary Meta Tags -->
    <title>Scriptoonミニ - AI画像生成PWAアプリ | テキスト・カメラから画像を生成</title>
    <meta name="title" content="Scriptoonミニ - AI画像生成PWAアプリ | テキスト・カメラから画像を生成">
    <meta name="description"
        content="スマートフォンで使えるAI画像生成PWAアプリ。テキストプロンプトやカメラで撮影した写真から高品質なAI画像を生成。fal.ai nano-banana-pro採用。オフライン対応、無料で利用可能。">
    <meta name="keywords"
        content="AI画像生成,画像生成AI,テキストから画像,image-to-image,PWA,スマートフォンアプリ,fal.ai,nano-banana-pro,無料AI,オフライン対応,AI art,画像生成ツール">
    <meta name="author" content="KAMIYA">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://tejastice.github.io/scriptoon-mini/">

    <!-- AI Crawler Meta Tags -->
    <meta name="ai-content-declaration" content="human-authored">
    <meta name="chatgpt-description"
        content="Scriptoonミニ is a Progressive Web App for AI image generation. Users can generate high-quality images from text prompts or reference photos taken with their smartphone camera. Built with fal.ai nano-banana-pro API. Features include offline support, custom prompts library, and image library. Free to use with your own API key.">
    <meta name="bingbot" content="index, follow">
    <meta name="slurp" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tejastice.github.io/scriptoon-mini/">
    <meta property="og:title" content="Scriptoonミニ - AI画像生成PWAアプリ">
    <meta property="og:description" content="スマートフォンで使えるAI画像生成アプリ。テキストやカメラで撮った写真からAIが高品質な画像を生成します。">
    <meta property="og:image" content="https://tejastice.github.io/scriptoon-mini/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Scriptoonミニ - AI画像生成アプリのスクリーンショット">
    <meta property="og:locale" content="ja_JP">
    <meta property="og:site_name" content="Scriptoonミニ">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://tejastice.github.io/scriptoon-mini/">
    <meta name="twitter:title" content="Scriptoonミニ - AI画像生成PWAアプリ">
    <meta name="twitter:description" content="スマートフォンで使えるAI画像生成アプリ。テキストやカメラで撮った写真からAIが高品質な画像を生成します。">
    <meta name="twitter:image" content="https://tejastice.github.io/scriptoon-mini/og-image.jpg">
    <meta name="twitter:image:alt" content="Scriptoonミニ - AI画像生成アプリのスクリーンショット">

    <!-- PWA & Mobile -->
    <meta name="theme-color" content="#4a6cf7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Scriptoonミニ">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Scriptoonミニ">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Scriptoonミニ",
      "alternateName": "Scriptoonミニ",
      "url": "https://tejastice.github.io/scriptoon-mini/",
      "description": "スマートフォンで使えるAI画像生成PWAアプリ。テキストプロンプトやカメラで撮影した写真から高品質なAI画像を生成できます。",
      "applicationCategory": "MultimediaApplication",
      "operatingSystem": "Any",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "JPY"
      },
      "author": {
        "@type": "Person",
        "name": "KAMIYA"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "5.0",
        "ratingCount": "1"
      },
      "featureList": [
        "テキストから画像生成 (Text-to-Image)",
        "画像から画像生成 (Image-to-Image)",
        "カメラ連携",
        "オフライン対応",
        "カスタムプロンプト保存",
        "画像ライブラリ機能",
        "PWAインストール対応"
      ],
      "screenshot": "https://tejastice.github.io/scriptoon-mini/og-image.jpg",
      "softwareVersion": "1.0.20",
      "datePublished": "2025-01-23",
      "dateModified": "2025-01-23"
    }
    </script>

    <!-- Resources -->
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-512.png">
</head>

<body>
    <div class="container">
        <header>
            <div class="header-content">
                <img src="icons/icon-192.png" alt="Scriptoonミニ" class="header-icon">
                <div class="header-text">
                    <h1>Scriptoonミニ <span class="version">v1.1.0</span></h1>
                </div>
                <div class="header-actions">
                    <button id="settingsBtn" class="header-btn" title="API設定">
                        ⚙️
                    </button>
                    <button id="installButton" class="install-button" style="display: none;" title="アプリをインストール">
                        📥
                    </button>
                </div>
            </div>

            <div class="api-warning" id="apiWarning" style="margin-top: 12px; margin-bottom: 0;">
                ⚠️ APIキーを入力してください
            </div>

            <!-- iOS Safari向けPWAインストール案内 -->
            <div id="iosPwaGuide" class="ios-pwa-guide"
                style="display: none; margin-top: 8px; padding: 8px 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; color: white; font-size: 13px; text-align: center;">
                📱 ホーム画面に追加するには: <strong>共有ボタン</strong> → <strong>ホーム画面に追加</strong>
            </div>
        </header>



        <main>
            <div class="input-section">
                <div class="image-library-container">
                    <div class="section-label">
                        <img src="icons/image-icon.png" alt="" class="section-icon"
                            style="width: 24px; height: 24px; object-fit: contain; vertical-align: middle; margin-right: 4px;">
                        画像ライブラリ(10ＭＢ以下)
                    </div>
                    <div class="image-library-section">
                        <input type="file" id="libraryFileInput" accept="image/*" multiple style="display: none;">
                        <button type="button" class="library-add-btn"
                            id="libraryAddBtn">ライブラリに画像を追加（クリックまたはドラッグ&ドロップ）</button>
                        <div class="image-library-grid" id="imageLibraryGrid"></div>
                    </div>
                </div>

                <div class="image-upload-section">
                    <div class="label-with-clear">
                        <label>参照画像(最大5枚、キャラクター画像、背景等)</label>
                        <button type="button" class="clear-btn" id="clearImagesBtn">すべてクリア</button>
                    </div>
                    <input type="file" id="imageFileInput" accept="image/*" multiple style="display: none;">
                    <input type="file" id="cameraFileInput" accept="image/*" capture="environment"
                        style="display: none;">
                    <div class="upload-controls" id="uploadControls">
                        <div class="upload-drop-zone-wrapper" id="uploadDropZone">
                            <div class="upload-message">
                                <p>📁 クリックまたはドラッグ&ドロップで画像を追加</p>
                                <small>最大5枚まで選択可能</small>
                            </div>
                            <div class="image-preview-container" id="imagePreviewContainer"></div>
                        </div>
                    </div>
                </div>



                <hr class="section-divider">



                <hr class="section-divider">

                <div class="label-with-clear">
                    <label for="prompt">プロンプト入力(漫画の内容等)</label>
                    <button type="button" class="clear-btn" id="clearPromptBtn">クリア</button>
                </div>
                <textarea id="prompt" rows="4" placeholder="例: 会議中にお腹がなって恥ずかしかった。これをテーマに漫画化..."></textarea>



                <hr class="section-divider">



                <hr class="section-divider">

                <div class="settings">
                    <div class="setting-item">
                        <label for="num_images">画像数:</label>
                        <select id="num_images">
                            <option value="1" selected>1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label for="aspect_ratio">アスペクト比:</label>
                        <select id="aspect_ratio">
                            <option value="1:1">1:1 (正方形)</option>
                            <option value="16:9">16:9 (横長)</option>
                            <option value="9:16">9:16 (縦長)</option>
                            <option value="4:3">4:3</option>
                            <option value="3:4">3:4</option>
                            <option value="21:9">21:9</option>
                            <option value="3:2">3:2</option>
                            <option value="2:3" selected>2:3 (推奨)</option>
                            <option value="5:4">5:4</option>
                            <option value="4:5">4:5</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label for="resolution">解像度:</label>
                        <select id="resolution">
                            <option value="1K" selected>1K</option>
                            <option value="2K">2K</option>
                            <option value="4K">4K</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label for="output_format">フォーマット:</label>
                        <select id="output_format">
                            <option value="png" selected>PNG</option>
                            <option value="jpeg">JPEG</option>
                            <option value="webp">WebP</option>
                        </select>
                    </div>
                </div>

                <div class="custom-prompts-section">
                    <div class="custom-prompts-accordion">
                        <button type="button" class="accordion-toggle" id="customPromptsToggle">
                            <span>📝 カスタムプロンプト設定</span>
                            <span class="accordion-icon">▼</span>
                        </button>
                        <div class="accordion-content" id="customPromptsContent">
                            <div class="custom-prompts-list" id="customPromptsList"></div>
                        </div>
                    </div>
                    <div class="custom-prompts-buttons" id="customPromptsButtons"></div>
                </div>


            </div>

            <div id="status" class="status"></div>

            <div id="results" class="results"></div>
        </main>

        <div class="action-buttons">
            <button id="generateImageBtn" class="generate-btn" disabled>
                <img src="icons/image-icon.png" alt="" class="btn-icon">
                <span class="btn-text">利用規約に同意をして画像を生成①</span>
                <span class="btn-loader" style="display: none;">生成中...</span>
            </button>
            <button id="generateMangaBtn" class="generate-btn" disabled>
                <img src="icons/icon-192.png" alt="" class="btn-icon">
                <span class="btn-text">利用規約に同意をして漫画を生成②</span>
                <span class="btn-loader" style="display: none;">生成中...</span>
            </button>
            <button id="editTextBtn" class="generate-btn" disabled>
                <span class="btn-text">✏️ 文字を編集する③</span>
                <span class="btn-loader" style="display: none;">生成中...</span>
            </button>
            <button id="cancelBtn" class="cancel-btn" style="display: none;">
                キャンセル
            </button>
        </div>

        <div class="terms-links">
            <a href="https://note.com/jinichirokamiya/n/n425a52b488ef?app_launch=false" class="terms-link"
                target="_blank" rel="noopener noreferrer">📄 利用規約</a>
        </div>

        <footer>
            <p>Created by KAMIYA</p>
        </footer>
        <!-- Settings Modal -->
        <div id="settingsModal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>API設定</h2>
                    <button type="button" class="close-modal-btn" id="closeSettingsBtn">×</button>
                </div>
                <div class="modal-body">
                    <div class="api-key-section">
                        <label for="api_key">FAL API Key:</label>
                        <input type="password" id="api_key" placeholder="APIキーを入力..." autocomplete="off">
                        <div class="api-key-buttons">
                            <button type="button" id="saveApiKeyBtn" class="api-btn save-btn">保存</button>
                            <button type="button" id="deleteApiKeyBtn" class="api-btn delete-btn">削除</button>
                        </div>
                        <small>
                            APIキーは<a href="https://fal.ai/dashboard/keys" target="_blank"
                                rel="noopener noreferrer">こちら</a>から取得できます。<br>
                            <a href="https://fal.ai/dashboard/usage-billing/credits" target="_blank"
                                rel="noopener noreferrer">💳 fal.aiにクレジットをチャージ</a><br>
                            <a href="https://note.com/jinichirokamiya/n/n425a52b488ef?app_launch=false" target="_blank"
                                rel="noopener noreferrer">📖 使い方・機能紹介</a><br>
                            APIキーはブラウザのローカルストレージに保存されます（暗号化されません）。他人と共有する端末では使用しないでください。
                        </small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Image Editor Modal -->
        <div id="imageEditorModal" class="modal-overlay" style="display: none;">
            <div class="image-editor-content">
                <div class="image-editor-header">
                    <h2>画像編集</h2>
                    <button type="button" class="close-modal-btn" id="closeEditorBtn">×</button>
                </div>
                <div class="image-editor-toolbar">
                    <button type="button" class="editor-tool-btn" id="addRedFrameBtn">
                        🔴 赤枠を追加
                    </button>
                    <button type="button" class="editor-tool-btn" id="deleteFrameBtn" disabled>
                        🗑️ 選択を削除
                    </button>
                </div>
                <div class="image-editor-canvas-container" id="editorCanvasContainer">
                    <canvas id="editorCanvas"></canvas>
                </div>
                <div class="image-editor-actions">
                    <button type="button" class="editor-action-btn cancel" id="cancelEditorBtn">
                        キャンセル
                    </button>
                    <button type="button" class="editor-action-btn save" id="saveEditorBtn">
                        💾 保存
                    </button>
                </div>


            </div>
        </div>

        <!-- Image Viewer Modal (Simple Lightbox) -->
        <div id="imageViewerModal" class="modal-overlay" style="display: none;">
            <div class="image-viewer-content">
                <button type="button" class="close-viewer-btn" id="closeViewerBtn">×</button>
                <img id="viewerImage" src="" alt="拡大画像">
            </div>
        </div>

    </div>

    <!-- FAL AI Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@fal-ai/serverless-client@0.10.2/dist/browser.js"></script>
    <script src="app.js"></script>
</body>

</html>